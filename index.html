<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Painel de Malhas por Turno - 2026</title>
  <style>
    *{ box-sizing:border-box; }
    body{
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      margin:0;
      padding:18px;
      background:#0d1117;
      color:#e6edf3;
    }

    h1{
      margin:0 0 6px 0;
      font-size:32px;
      letter-spacing:-0.3px;
    }
    .subtitle{
      margin:0 0 14px 0;
      color:#9aa4b2;
      font-size:14px;
      line-height:1.35;
    }

    .topbar{
      display:flex;
      flex-wrap:wrap;
      gap:10px 12px;
      align-items:center;
      margin:10px 0 12px 0;
    }
    .control{
      display:flex;
      align-items:center;
      gap:8px;
      background:#161b22;
      border:1px solid #30363d;
      border-radius:999px;
      padding:8px 10px;
    }
    .control label{
      color:#c9d1d9;
      font-size:13px;
      font-weight:800;
      margin-right:4px;
    }
    select, input, button{
      border-radius:999px;
      border:1px solid #30363d;
      background:#0d1117;
      color:#e6edf3;
      padding:8px 12px;
      font-size:13px;
      outline:none;
    }
    input::placeholder{ color:#8b949e; }

    .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:8px 12px;
      border-radius:999px;
      background:#161b22;
      border:1px solid #30363d;
      color:#c9d1d9;
      font-size:13px;
      font-weight:800;
      white-space:nowrap;
    }

    .tabs{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      margin:10px 0 10px 0;
    }
    .tab{
      cursor:pointer;
      border-radius:999px;
      padding:10px 14px;
      border:1px solid #30363d;
      background:#161b22;
      color:#e6edf3;
      font-size:13px;
      font-weight:900;
    }
    .tab.active{
      background:#1f6feb;
      border-color:#1f6feb;
      color:#fff;
    }

    .card{
      background:#161b22;
      border:1px solid #30363d;
      border-radius:14px;
      padding:12px;
      box-shadow:0 1px 3px rgba(0,0,0,0.35);
    }

    .legend{
      display:flex;
      flex-wrap:wrap;
      gap:10px 14px;
      align-items:center;
      padding:10px 12px;
      border-radius:14px;
      border:1px solid #30363d;
      background:#0f141b;
      margin:10px 0 12px 0;
      font-size:13px;
      color:#c9d1d9;
    }
    .legend .title{
      font-weight:900;
      color:#fff;
      margin-right:6px;
    }
    .legend-item{
      display:inline-flex;
      align-items:center;
      gap:8px;
      white-space:nowrap;
    }

    .dot{
      width:12px;
      height:12px;
      border-radius:50%;
      border:1px solid rgba(255,255,255,0.15);
      display:inline-block;
    }
    .dot-em_execucao{ background:#d29922; }
    .dot-ok{ background:#2ea043; }
    .dot-contingencia{ background:#1f6feb; }
    .dot-abend{ background:#f85149; }
    .dot-nao_comecou{ background:#a371f7; }
    .dot-ag_condicao{ background:#8b949e; }
    .dot-sem_exec{ background:#010409; border:1px solid #30363d; }

    .filters{
      display:flex;
      flex-wrap:wrap;
      gap:10px 12px;
      align-items:center;
      margin:10px 0 12px 0;
    }
    .filters .group{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      align-items:center;
    }
    .filters .group .label{
      font-size:13px;
      font-weight:900;
      color:#c9d1d9;
      margin-right:6px;
    }
    .chip{
      cursor:pointer;
      user-select:none;
      border-radius:999px;
      padding:8px 12px;
      border:1px solid #30363d;
      background:#0d1117;
      font-size:13px;
      font-weight:900;
      color:#e6edf3;
    }
    .chip.active{
      background:#fff;
      color:#0d1117;
      border-color:#fff;
    }

    table{
      width:100%;
      border-collapse:separate;
      border-spacing:0;
      overflow:hidden;
      border-radius:14px;
      border:1px solid #30363d;
    }
    thead th{
      background:#21262d;
      color:#e6edf3;
      font-size:12px;
      text-transform:none;
      letter-spacing:0.2px;
      padding:10px 10px;
      border-bottom:1px solid #30363d;
      white-space:nowrap;
      text-align:left;
    }
    tbody td{
      padding:10px 10px;
      border-bottom:1px solid #30363d;
      font-size:13px;
      color:#e6edf3;
      white-space:nowrap;
      vertical-align:top;
    }
    tbody tr:nth-child(even){ background:#0f141b; }
    tbody tr:last-child td{ border-bottom:none; }

    .status-cell{
      display:flex;
      align-items:center;
      gap:8px;
      font-weight:900;
    }
    .note{
      white-space:normal;
      color:#c9d1d9;
      max-width:420px;
    }
    .muted{ color:#9aa4b2; }

    .kpis{
      display:grid;
      grid-template-columns:repeat(auto-fit, minmax(220px,1fr));
      gap:12px;
      margin-top:10px;
    }
    .kpi-title{
      color:#9aa4b2;
      font-size:13px;
      font-weight:900;
      margin-bottom:6px;
    }
    .kpi-value{
      font-size:34px;
      font-weight:1000;
      line-height:1;
    }

    textarea{
      width:100%;
      min-height:260px;
      border-radius:14px;
      border:1px solid #30363d;
      background:#0d1117;
      color:#e6edf3;
      padding:12px;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size:13px;
      resize:vertical;
    }

    .hint{
      margin-top:10px;
      font-size:12px;
      color:#9aa4b2;
    }

    .footer{
      margin-top:14px;
      font-size:11px;
      color:#8b949e;
    }

    .badge{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      padding:4px 10px;
      border-radius:999px;
      font-weight:1000;
      font-size:12px;
      border:1px solid #30363d;
      background:#0d1117;
      color:#e6edf3;
      white-space:nowrap;
    }
    .badge.T1{ border-color:#1f6feb; }
    .badge.T2{ border-color:#d29922; }
    .badge.T3{ border-color:#f85149; }

    .quick-grid{
      display:grid;
      grid-template-columns:repeat(auto-fit, minmax(240px, 1fr));
      gap:12px;
      margin-top:10px;
    }
    .quick-item{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      padding:12px;
      border-radius:14px;
      border:1px solid #30363d;
      background:#0f141b;
    }
    .quick-left{
      display:flex;
      align-items:center;
      gap:10px;
      min-width:0;
    }
    .quick-name{
      font-weight:1000;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      max-width:220px;
    }
    .quick-meta{
      font-size:12px;
      color:#9aa4b2;
      margin-top:2px;
    }
  </style>
</head>

<body>
  <h1>Painel de Malhas por Turno - Janeiro 2026</h1>
  <p class="subtitle">
    A equipe acompanha status, t√©rmino real e ‚Äúfim de jogo‚Äù. Use as abas para alternar entre o quadro di√°rio,
    vis√£o r√°pida por status, resumo para o time e indicadores do m√™s.
  </p>

  <div class="topbar">
    <div class="control">
      <label>M√™s:</label>
      <select id="monthSelect"></select>
    </div>

    <div class="control">
      <label>Dia:</label>
      <select id="daySelect"></select>
    </div>

    <span class="pill" id="odatePill">Odate: -</span>
    <span class="pill" id="sourcePill">Fonte: malhas.json</span>
    <span class="pill" id="syncPill">Sync: -</span>
  </div>

  <div class="tabs">
    <button class="tab active" data-tab="quadro">Quadro di√°rio</button>
    <button class="tab" data-tab="status">Status das malhas</button>
    <button class="tab" data-tab="resumo">Resumo do dia (para o time)</button>
    <button class="tab" data-tab="indicadores">Indicadores do m√™s</button>
    <button class="tab" data-tab="instrucoes">Instru√ß√µes</button>
  </div>

  <div class="legend">
    <span class="title">Legenda</span>
    <span class="legend-item"><span class="dot dot-em_execucao"></span> Em execu√ß√£o</span>
    <span class="legend-item"><span class="dot dot-ok"></span> Finalizado</span>
    <span class="legend-item"><span class="dot dot-contingencia"></span> Conting√™ncia</span>
    <span class="legend-item"><span class="dot dot-abend"></span> Abend</span>
    <span class="legend-item"><span class="dot dot-nao_comecou"></span> N√£o come√ßou</span>
    <span class="legend-item"><span class="dot dot-ag_condicao"></span> Aguardando condi√ß√£o</span>
    <span class="legend-item"><span class="dot dot-sem_exec"></span> Sem execu√ß√£o no Odate</span>
    <span class="legend-item">‚ö™/üîµ em ‚ÄúFim de jogo‚Äù = n√£o validado / validado</span>
  </div>

  <div id="filters" class="filters card">
    <div class="group">
      <span class="label">Filtrar por turno:</span>
      <span class="chip active" data-filter="turno" data-value="Todos">Todos</span>
      <span class="chip" data-filter="turno" data-value="T1">T1</span>
      <span class="chip" data-filter="turno" data-value="T2">T2</span>
      <span class="chip" data-filter="turno" data-value="T3">T3</span>
    </div>

    <div class="group">
      <span class="label">Filtrar por categoria:</span>
      <span class="chip active" data-filter="categoria" data-value="Todas">Todas</span>
      <span class="chip" data-filter="categoria" data-value="Rotativos">Rotativos</span>
      <span class="chip" data-filter="categoria" data-value="Parcelados">Parcelados</span>
      <span class="chip" data-filter="categoria" data-value="Modelos">Modelos</span>
      <span class="chip" data-filter="categoria" data-value="Gest√£o PJ/Alto Risco">Gest√£o PJ/Alto Risco</span>
      <span class="chip" data-filter="categoria" data-value="Semanal">Semanal</span>
    </div>

    <div class="group">
      <span class="label">Buscar malha:</span>
      <input id="searchInput" placeholder="Ex.: SUPER CR√âDITO, CONSIGNADO" />
      <button id="btnClear">Limpar</button>
    </div>
  </div>

  <!-- QUADRO -->
  <div id="viewQuadro" class="card">
    <table>
      <thead>
        <tr>
          <th>Categoria</th>
          <th>Malha</th>
          <th>Turno final</th>
          <th>In√≠cio previsto</th>
          <th>T√©rmino previsto</th>
          <th>Frequ√™ncia</th>
          <th>T√©rmino real</th>
          <th>Status</th>
          <th>Fim de jogo</th>
          <th>Nota</th>
        </tr>
      </thead>
      <tbody id="tbodyQuadro"></tbody>
    </table>
    <div class="hint">Read-only. Atualize o malhas.json via automa√ß√£o e o painel reflete.</div>
  </div>

  <!-- STATUS R√ÅPIDO -->
  <div id="viewStatus" class="card" style="display:none;">
    <div class="hint">Vis√£o r√°pida por status do dia selecionado.</div>
    <div id="quickGrid" class="quick-grid"></div>
  </div>

  <!-- RESUMO -->
  <div id="viewResumo" class="card" style="display:none;">
    <div style="display:flex;gap:10px;flex-wrap:wrap;align-items:center;margin-bottom:10px;">
      <button id="btnGerarResumo">Gerar resumo</button>
      <span class="pill" id="resumoInfo">-</span>
    </div>
    <textarea id="resumoText" readonly></textarea>
    <div class="hint">Copie e cole no Teams. üîµ = fim de jogo validado.</div>
  </div>

  <!-- INDICADORES -->
  <div id="viewIndicadores" class="card" style="display:none;">
    <div class="kpis">
      <div class="card">
        <div class="kpi-title">ABEND no m√™s</div>
        <div class="kpi-value" id="kpiAbend">0</div>
      </div>
      <div class="card">
        <div class="kpi-title">Conting√™ncia no m√™s</div>
        <div class="kpi-value" id="kpiCont">0</div>
      </div>
